<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Duck Hunt 2.0</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

  <link rel="shortcut icon" type="image/x-icon" href="resources/sprites/duck/png/right1.png" />

  <!-- CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="CSS/styles.css?v=3">
  <link rel="stylesheet" href="CSS/bar.css?v=2">
  <link rel="stylesheet" href="CSS/overlays.css?v=2">
  <link rel="stylesheet" href="CSS/startScreen.css?v=3"><!-- bump to bust cache -->

  <!-- üöë EARLY GLOBAL FALLBACK (MUST BE FIRST SCRIPT) -->
  <script>
    // Prevent ReferenceError before Duck.js computes the real value
    window.duckElevPx = 0;
    var duckElevPx = window.duckElevPx;
  </script>

  <!-- jQuery -->
  <script src="JS/JQuery/jquery-3.3.1.js"></script>

  <!-- Bootstrap JS (after jQuery) -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>

<body>
  <!-- Game wrapper: fixed design size, scaled to fit viewport via JS -->
  <div id="gameWrap">

    <!-- Start screen (hidden until BootIntro finishes) -->
    <div id="startScreen" class="startScreen is-hidden">
      <div class="startScreen__content">

        <!-- DRANKHUNT logo -->
        <img
          id="drankHuntLogo"
          class="startScreen__logo"
          src="resources/sprites/ui/drankhunt-logo.png"
          alt="DRANKHUNT"
          draggable="false"
        />

        <!-- Start button -->
        <div class="startScreen__content__box startScreen__startBtn" onclick="launchApplication()">
          <h2 id="startButton">START</h2>
        </div>

        <!-- Mode select -->
        <div class="startScreen__content__box" id="modeSelect">
          <div class="arrow" id="prevMode">‚è¥</div>
          <div class="selection">CLASSIC</div>
          <div class="arrow" id="nextMode">‚èµ</div>
        </div>

        <div id="startScreenFooter">Tap START to play</div>
      </div>
    </div>

    <div id="sky" class="sky">
      <div class="comboMessage"></div>

      <div id="pointsCounter">
        <h2 id="levelCount">1</h2>
      </div>

      <div class="bushes">
        <div class="barRow">
          <div class="rowCell ammunitionCell" id="shots">
            <div class="ammunitionCell__info">
              <h2 id="ammunitionAmmount">0</h2>
              <h2>SHOT</h2>
            </div>
            <div class="ammunitionCell__gunIcon">
              <img id="gunIcon" src="resources/sprites/weapons/gun.png" alt="">
            </div>
          </div>

          <div class="rowCell" id="hit" style="width:40%;">
            <div class="lifesIcons">
              <img id="life1" src="resources/sprites/scoreImages/life.png" alt="">
              <img id="life2" src="resources/sprites/scoreImages/life.png" alt="">
              <img id="life3" src="resources/sprites/scoreImages/life.png" alt="">
            </div>
            <div class="progress">
              <div id="roundProgress" class="progress-bar progress-bar-striped active" role="progressbar"
                   aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%">
                0%
              </div>
            </div>
          </div>

          <div class="rowCell scoreCell" id="score">
            <h2 id="scoreCount">0</h2>
            <h2>SCORE</h2>
          </div>
        </div>
      </div>
    </div>

    <div id="levelBox">
      <h3 id="levelBoxP">LEVEL</h3>
    </div>

    <!-- IMPORTANT: start hidden so it doesn't block the Start Screen -->
    <div id="shootBlocker" style="display:none;"></div>

    <div id="overlay">
      <div class="resultsBox">
        <h3 style="color:rgb(0, 225, 255)">Game Over!</h3>
        <table>
          <tr><td>YOUR POINTS</td><td id="pointsSummary"></td></tr>
          <tr><td>ROUND</td><td id="roundSummary"></td></tr>
          <tr><td>SUCCESSFUL SHOTS</td><td id="shotsSummary"></td></tr>
          <tr><td>ACCURACY</td><td id="accuracySummary"></td></tr>
        </table>

        <h3 id="playAgainButton" class="cursorChange" onclick="window.location.reload()">PLAY AGAIN</h3>
      </div>
    </div>

    <div id="winOverlay">
      <div class="resultsBox">
        <h3 style="color:rgb(0, 225, 255)">CONGRATULATIONS ‚Äî YOU WON A FREE SHIRT</h3>
        <h3>Promo code: DRANKHUNT139</h3>
        <h3 id="playAgainButton" class="cursorChange" onclick="window.location.reload()">PLAY AGAIN</h3>
      </div>
    </div>

  </div>

  <!-- Scripts: include each file ONCE, in dependency order -->
  <script src="JS/Scale.js" defer></script>
  <script src="JS/PointsHandler.js?v=2" defer></script>
  <script src="JS/DucksHandler.js?v=2" defer></script>
  <script src="JS/Duck.js?v=2" defer></script>
  <script src="JS/View.js?v=2" defer></script>
  <script src="JS/ShotHandler.js?v=2" defer></script>
  <script src="JS/Dog.js?v=2" defer></script>
  <script src="JS/Game.js?v=2" defer></script>
  <script src="JS/StartScreen.js?v=3" defer></script><!-- bump to bust cache -->

  <!-- Boot intro -->
  <script src="JS/BootIntro.js" defer onerror="console.warn('BootIntro.js failed to load (non-fatal)')"></script>

  <!-- Fallback: if BootIntro never reveals the start screen, show it after a short delay -->
  <script>
    window.addEventListener('load', () => {
      setTimeout(() => {
        const el = document.getElementById('startScreen');
        if (el && el.classList.contains('is-hidden')) {
          el.classList.remove('is-hidden');
        }
      }, 2500);
    });
  </script>

  <!-- App entry -->
  <script src="JS/Application.js?v=3" defer></script>
</body>
</html>
